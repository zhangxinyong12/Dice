<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>React CDN Demo with JSX</title>
  <style>
    /*
! tailwindcss v3.3.3 | MIT License | https://tailwindcss.com
*/
    *,
    :after,
    :before {
      box-sizing: border-box;
      border: 0 solid #e5e7eb
    }

    :after,
    :before {
      --tw-content: ""
    }

    html {
      line-height: 1.5;
      -webkit-text-size-adjust: 100%;
      -moz-tab-size: 4;
      -o-tab-size: 4;
      tab-size: 4;
      font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;
      font-feature-settings: normal;
      font-variation-settings: normal
    }

    body {
      margin: 0;
      line-height: inherit
    }

    hr {
      height: 0;
      color: inherit;
      border-top-width: 1px
    }

    abbr:where([title]) {
      -webkit-text-decoration: underline dotted;
      text-decoration: underline dotted
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      font-size: inherit;
      font-weight: inherit
    }

    a {
      color: inherit;
      text-decoration: inherit
    }

    b,
    strong {
      font-weight: bolder
    }

    code,
    kbd,
    pre,
    samp {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace;
      font-size: 1em
    }

    small {
      font-size: 80%
    }

    sub,
    sup {
      font-size: 75%;
      line-height: 0;
      position: relative;
      vertical-align: baseline
    }

    sub {
      bottom: -.25em
    }

    sup {
      top: -.5em
    }

    table {
      text-indent: 0;
      border-color: inherit;
      border-collapse: collapse
    }

    button,
    input,
    optgroup,
    select,
    textarea {
      font-family: inherit;
      font-feature-settings: inherit;
      font-variation-settings: inherit;
      font-size: 100%;
      font-weight: inherit;
      line-height: inherit;
      color: inherit;
      margin: 0;
      padding: 0
    }

    button,
    select {
      text-transform: none
    }

    [type=button],
    [type=reset],
    [type=submit],
    button {
      -webkit-appearance: button;
      background-color: transparent;
      background-image: none
    }

    :-moz-focusring {
      outline: auto
    }

    :-moz-ui-invalid {
      box-shadow: none
    }

    progress {
      vertical-align: baseline
    }

    ::-webkit-inner-spin-button,
    ::-webkit-outer-spin-button {
      height: auto
    }

    [type=search] {
      -webkit-appearance: textfield;
      outline-offset: -2px
    }

    ::-webkit-search-decoration {
      -webkit-appearance: none
    }

    ::-webkit-file-upload-button {
      -webkit-appearance: button;
      font: inherit
    }

    summary {
      display: list-item
    }

    blockquote,
    dd,
    dl,
    figure,
    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    hr,
    p,
    pre {
      margin: 0
    }

    fieldset {
      margin: 0
    }

    fieldset,
    legend {
      padding: 0
    }

    menu,
    ol,
    ul {
      list-style: none;
      margin: 0;
      padding: 0
    }

    dialog {
      padding: 0
    }

    textarea {
      resize: vertical
    }

    input::-moz-placeholder,
    textarea::-moz-placeholder {
      opacity: 1;
      color: #9ca3af
    }

    input::placeholder,
    textarea::placeholder {
      opacity: 1;
      color: #9ca3af
    }

    [role=button],
    button {
      cursor: pointer
    }

    :disabled {
      cursor: default
    }

    audio,
    canvas,
    embed,
    iframe,
    img,
    object,
    svg,
    video {
      display: block;
      vertical-align: middle
    }

    img,
    video {
      max-width: 100%;
      height: auto
    }

    [hidden] {
      display: none
    }

    *,
    :after,
    :before {
      --tw-border-spacing-x: 0;
      --tw-border-spacing-y: 0;
      --tw-translate-x: 0;
      --tw-translate-y: 0;
      --tw-rotate: 0;
      --tw-skew-x: 0;
      --tw-skew-y: 0;
      --tw-scale-x: 1;
      --tw-scale-y: 1;
      --tw-pan-x: ;
      --tw-pan-y: ;
      --tw-pinch-zoom: ;
      --tw-scroll-snap-strictness: proximity;
      --tw-gradient-from-position: ;
      --tw-gradient-via-position: ;
      --tw-gradient-to-position: ;
      --tw-ordinal: ;
      --tw-slashed-zero: ;
      --tw-numeric-figure: ;
      --tw-numeric-spacing: ;
      --tw-numeric-fraction: ;
      --tw-ring-inset: ;
      --tw-ring-offset-width: 0px;
      --tw-ring-offset-color: #fff;
      --tw-ring-color: rgba(59, 130, 246, .5);
      --tw-ring-offset-shadow: 0 0 #0000;
      --tw-ring-shadow: 0 0 #0000;
      --tw-shadow: 0 0 #0000;
      --tw-shadow-colored: 0 0 #0000;
      --tw-blur: ;
      --tw-brightness: ;
      --tw-contrast: ;
      --tw-grayscale: ;
      --tw-hue-rotate: ;
      --tw-invert: ;
      --tw-saturate: ;
      --tw-sepia: ;
      --tw-drop-shadow: ;
      --tw-backdrop-blur: ;
      --tw-backdrop-brightness: ;
      --tw-backdrop-contrast: ;
      --tw-backdrop-grayscale: ;
      --tw-backdrop-hue-rotate: ;
      --tw-backdrop-invert: ;
      --tw-backdrop-opacity: ;
      --tw-backdrop-saturate: ;
      --tw-backdrop-sepia:
    }

    ::backdrop {
      --tw-border-spacing-x: 0;
      --tw-border-spacing-y: 0;
      --tw-translate-x: 0;
      --tw-translate-y: 0;
      --tw-rotate: 0;
      --tw-skew-x: 0;
      --tw-skew-y: 0;
      --tw-scale-x: 1;
      --tw-scale-y: 1;
      --tw-pan-x: ;
      --tw-pan-y: ;
      --tw-pinch-zoom: ;
      --tw-scroll-snap-strictness: proximity;
      --tw-gradient-from-position: ;
      --tw-gradient-via-position: ;
      --tw-gradient-to-position: ;
      --tw-ordinal: ;
      --tw-slashed-zero: ;
      --tw-numeric-figure: ;
      --tw-numeric-spacing: ;
      --tw-numeric-fraction: ;
      --tw-ring-inset: ;
      --tw-ring-offset-width: 0px;
      --tw-ring-offset-color: #fff;
      --tw-ring-color: rgba(59, 130, 246, .5);
      --tw-ring-offset-shadow: 0 0 #0000;
      --tw-ring-shadow: 0 0 #0000;
      --tw-shadow: 0 0 #0000;
      --tw-shadow-colored: 0 0 #0000;
      --tw-blur: ;
      --tw-brightness: ;
      --tw-contrast: ;
      --tw-grayscale: ;
      --tw-hue-rotate: ;
      --tw-invert: ;
      --tw-saturate: ;
      --tw-sepia: ;
      --tw-drop-shadow: ;
      --tw-backdrop-blur: ;
      --tw-backdrop-brightness: ;
      --tw-backdrop-contrast: ;
      --tw-backdrop-grayscale: ;
      --tw-backdrop-hue-rotate: ;
      --tw-backdrop-invert: ;
      --tw-backdrop-opacity: ;
      --tw-backdrop-saturate: ;
      --tw-backdrop-sepia:
    }

    .m-4 {
      margin: 1rem
    }

    .mb-20 {
      margin-bottom: 5rem
    }

    .ml-4 {
      margin-left: 1rem
    }

    .mt-1 {
      margin-top: .25rem
    }

    .mt-4 {
      margin-top: 1rem
    }

    .box-border {
      box-sizing: border-box
    }

    .flex {
      display: flex
    }

    .h-\[36\] {
      height: 36
    }

    .h-\[400px\] {
      height: 400px
    }

    .h-\[440px\] {
      height: 440px
    }

    .w-\[400px\] {
      width: 400px
    }

    .w-\[490px\] {
      width: 490px
    }

    .w-full {
      width: 100%
    }

    .flex-wrap {
      flex-wrap: wrap
    }

    .rounded {
      border-radius: .25rem
    }

    .rounded-md {
      border-radius: .375rem
    }

    .border {
      border-width: 1px
    }

    .border-slate-300 {
      --tw-border-opacity: 1;
      border-color: rgb(203 213 225/var(--tw-border-opacity))
    }

    .bg-blue-500 {
      --tw-bg-opacity: 1;
      background-color: rgb(59 130 246/var(--tw-bg-opacity))
    }

    .bg-gray-300 {
      --tw-bg-opacity: 1;
      background-color: rgb(209 213 219/var(--tw-bg-opacity))
    }

    .bg-white {
      --tw-bg-opacity: 1;
      background-color: rgb(255 255 255/var(--tw-bg-opacity))
    }

    .p-4 {
      padding: 1rem
    }

    .px-3 {
      padding-left: .75rem;
      padding-right: .75rem
    }

    .px-4 {
      padding-left: 1rem;
      padding-right: 1rem
    }

    .py-2 {
      padding-top: .5rem;
      padding-bottom: .5rem
    }

    .text-center {
      text-align: center
    }

    .align-middle {
      vertical-align: middle
    }

    .font-bold {
      font-weight: 700
    }

    .text-white {
      --tw-text-opacity: 1;
      color: rgb(255 255 255/var(--tw-text-opacity))
    }

    .placeholder-slate-400::-moz-placeholder {
      --tw-placeholder-opacity: 1;
      color: rgb(148 163 184/var(--tw-placeholder-opacity))
    }

    .placeholder-slate-400::placeholder {
      --tw-placeholder-opacity: 1;
      color: rgb(148 163 184/var(--tw-placeholder-opacity))
    }

    .shadow-sm {
      --tw-shadow: 0 1px 2px 0 rgba(0, 0, 0, .05);
      --tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);
      box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)
    }

    .filter {
      filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)
    }

    .hover\:bg-blue-700:hover {
      --tw-bg-opacity: 1;
      background-color: rgb(29 78 216/var(--tw-bg-opacity))
    }

    .hover\:bg-gray-700:hover {
      --tw-bg-opacity: 1;
      background-color: rgb(55 65 81/var(--tw-bg-opacity))
    }

    .focus\:border-sky-500:focus {
      --tw-border-opacity: 1;
      border-color: rgb(14 165 233/var(--tw-border-opacity))
    }

    .focus\:outline-none:focus {
      outline: 2px solid transparent;
      outline-offset: 2px
    }

    .focus\:ring-1:focus {
      --tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);
      --tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);
      box-shadow: var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)
    }

    .focus\:ring-sky-500:focus {
      --tw-ring-opacity: 1;
      --tw-ring-color: rgb(14 165 233/var(--tw-ring-opacity))
    }

    @font-face {
      font-family: __Inter_20951f;
      font-style: normal;
      font-weight: 100 900;
      font-display: swap;
      src: url(/_next/static/media/d1d9458b69004127-s.woff2) format("woff2");
      unicode-range: U+0460-052f, U+1c80-1c88, U+20b4, U+2de0-2dff, U+a640-a69f, U+fe2e-fe2f
    }

    @font-face {
      font-family: __Inter_20951f;
      font-style: normal;
      font-weight: 100 900;
      font-display: swap;
      src: url(/_next/static/media/b967158bc7d7a9fb-s.woff2) format("woff2");
      unicode-range: U+0301, U+0400-045f, U+0490-0491, U+04b0-04b1, U+2116
    }

    @font-face {
      font-family: __Inter_20951f;
      font-style: normal;
      font-weight: 100 900;
      font-display: swap;
      src: url(/_next/static/media/ae9ae6716d4f8bf8-s.woff2) format("woff2");
      unicode-range: U+1f??
    }

    @font-face {
      font-family: __Inter_20951f;
      font-style: normal;
      font-weight: 100 900;
      font-display: swap;
      src: url(/_next/static/media/c0f5ec5bbf5913b7-s.woff2) format("woff2");
      unicode-range: U+0370-03ff
    }

    @font-face {
      font-family: __Inter_20951f;
      font-style: normal;
      font-weight: 100 900;
      font-display: swap;
      src: url(/_next/static/media/b1db3e28af9ef94a-s.woff2) format("woff2");
      unicode-range: U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01a0-01a1, U+01af-01b0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329, U+1ea0-1ef9, U+20ab
    }

    @font-face {
      font-family: __Inter_20951f;
      font-style: normal;
      font-weight: 100 900;
      font-display: swap;
      src: url(/_next/static/media/9c4f34569c9b36ca-s.woff2) format("woff2");
      unicode-range: U+0100-02af, U+0304, U+0308, U+0329, U+1e00-1e9f, U+1ef2-1eff, U+2020, U+20a0-20ab, U+20ad-20cf, U+2113, U+2c60-2c7f, U+a720-a7ff
    }

    @font-face {
      font-family: __Inter_20951f;
      font-style: normal;
      font-weight: 100 900;
      font-display: swap;
      src: url(/_next/static/media/2aaf0723e720e8b9-s.p.woff2) format("woff2");
      unicode-range: U+00??, U+0131, U+0152-0153, U+02bb-02bc, U+02c6, U+02da, U+02dc, U+0304, U+0308, U+0329, U+2000-206f, U+2074, U+20ac, U+2122, U+2191, U+2193, U+2212, U+2215, U+feff, U+fffd
    }

    @font-face {
      font-family: __Inter_Fallback_20951f;
      src: local("Arial");
      ascent-override: 90.20%;
      descent-override: 22.48%;
      line-gap-override: 0.00%;
      size-adjust: 107.40%
    }

    .__className_20951f {
      font-family: __Inter_20951f, __Inter_Fallback_20951f;
      font-style: normal
    }
  </style>
</head>

<body>
  <div id="root"></div>

  <!-- 引入 React、ReactDOM 和 Babel 的 CDN 链接 -->
  <script src="https://cdn.bootcdn.net/ajax/libs/react/17.0.2/umd/react.development.js"></script>
  <script src="https://cdn.bootcdn.net/ajax/libs/react-dom/17.0.2/umd/react-dom.development.js"></script>
  <script src="https://cdn.bootcdn.net/ajax/libs/babel-standalone/6.26.0/babel.min.js"></script>
  <script src="https://cdn.bootcdn.net/ajax/libs/echarts/5.4.2/echarts.min.js"></script>
  <script type="text/babel">
    console.log(window.Recharts)
    // 获取 React 和 ReactDOM 对象
    const { useState, useEffect, useRef } = React;
    const { render } = ReactDOM;
    const Dice = ({ n, data }) => {
      const domRef = useRef(null);
      console.log(n, data)

      useEffect(() => {
        init();
      }, [data]);

      function init() {
        console.log(data.map(el => el.value))
        if (
          !domRef.current ||
          !Array.isArray(data) ||
          data.length === 0
        ) {
          return;
        }
        // 基于准备好的dom，初始化echarts实例
        const myChart = echarts.init(domRef.current);

        // 指定图表的配置项和数据
        const option = {
          title: {
            text: `${n}次骰子点数统计`
          },
          tooltip: {},
          legend: {
            data: ['次数']
          },
          xAxis: {
            data: ['2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12']
          },
          yAxis: {},
          series: [
            {
              name: '次数',
              type: 'bar',
              data: data.map(el => el.value)
            }
          ]
        };

        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
      }

      return (
        <div className="dice-box border m-4 p-4">
          <div className="w-[400px] h-[400px] mt-4" ref={domRef}>
          </div>
        </div>
      )
    }

    function Home() {
      const [list, setList] = useState([])
      const [n, setN] = useState(2)

      function btn() {
        if (n < 1) {
          alert("请输入大于0的数字")
          return
        }
        const list2 = []
        for (let i = 0; i < n; i++) {
          list2.push(random() + random())
        }
        const data = {
          n,
          data: [
            { name: "2", value: findCount(list2, 2) },
            { name: "3", value: findCount(list2, 3) },
            { name: "4", value: findCount(list2, 4) },
            { name: "5", value: findCount(list2, 5) },
            { name: "6", value: findCount(list2, 6) },
            { name: "7", value: findCount(list2, 7) },
            { name: "8", value: findCount(list2, 8) },
            { name: "9", value: findCount(list2, 9) },
            { name: "10", value: findCount(list2, 10) },
            { name: "11", value: findCount(list2, 11) },
            { name: "12", value: findCount(list2, 12) },
          ],
        }
        const arr = [...list, data]
        console.log(arr)
        setList(arr)
      }
      // 计算每个数字出现的次数
      function findCount(array, target) {
        return array.filter((el) => el === target).length || 0
      }
      // 随机生成1-6的整数
      function random() {
        return Math.floor(Math.random() * 6 + 1)
      }
      return (
        <div className="p-4">
          <div className="number-form">
            <div className="flex align-middle ">
              <input
                className="h-[36] mt-1 px-3 py-2 bg-white border shadow-sm border-slate-300 placeholder-slate-400 focus:outline-none focus:border-sky-500 focus:ring-sky-500 rounded-md  focus:ring-1  brfore:content-['*'] brfore:ml-0.5 brfore:text-red-500"
                type="number"
                placeholder="请输入要执行的次数"
                value={n}
                onChange={(e) => {
                  setN(e.target.value)
                }}
              />
              <button
                onClick={btn}
                className="ml-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"
              >
                确定
              </button>

              <button
                onClick={() => {
                  setList([])
                }}
                className="ml-4 bg-gray-300 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded"
              >
                清空
              </button>
            </div>
          </div>
          <div className="flex flex-wrap">
            {list.map((el, index) => {
              return (
                <div key={index} className="w-[490px] h-[440px] box-border mb-20">
                  <Dice n={el.n} data={el.data} />
                </div>
              )
            })}
          </div>
        </div>
      )
    }
    // 渲染 React 组件到页面上
    render(<Home />, document.getElementById('root'));
  </script>
</body>

</html>